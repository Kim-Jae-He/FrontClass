{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\TED\\\\Desktop\\\\FrontClass\\\\resource\\\\react\\\\test\\\\src\\\\components\\\\common\\\\header.js\",\n  _s = $RefreshSig$();\nimport { useContext, useEffect, useState } from \"react\";\nimport { UserText } from \"../../styles/common/aside.styles\";\nimport { Header } from \"../../styles/common/header.styles\";\nimport axios from \"axios\";\nimport { UserContext } from \"../../App\";\nimport { useNavigate } from \"react-router-dom\";\nimport MenuIcon from '@mui/icons-material/Menu';\nimport MenuOpenIcon from '@mui/icons-material/MenuOpen';\nimport { Popover } from \"@mui/material\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DashboardHeader = () => {\n  _s();\n  const navigate = useNavigate();\n  // 전역state변수에 있는 토큰 값 가져오기\n  const {\n    accessToken\n  } = useContext(UserContext);\n  const [loggedInUser, setLoggedInUser] = useState({\n    email: '로그인후 이용해주세요',\n    created_date: '',\n    updated_date: ''\n  });\n  // const [loggedInEmail , setLoggedInEmail] = useState('로그인후 이용해주세요');\n\n  // popOver 창의 기준 element 요소\n  const [anchorEl, setAnchorEl] = useState(null);\n  let open = Boolean(anchorEl);\n\n  // 헤더가 그려지면 db가서 로그인 한 사람 정보 가져오기\n  useEffect(() => {\n    let tmp = async () => {\n      try {\n        let res = await axios.get('/api/loggedInEmail', {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('accessToken')}`\n          }\n        });\n\n        // res.data에 로그인한 사람 이메일 주소가 들어있음\n        let res2 = await axios.get(`/api/users/${res.data}`);\n        console.log(res2.data);\n        setLoggedInUser(res2.data);\n      } catch (err) {\n        // 로그인 시간이 만료되거나 로그인을 안한 경우\n        console.log(err);\n        alert('로그인을 먼저 해주셔야 이용하실 수 있습니다');\n        navigate('/login', {\n          replace: true\n        });\n      }\n    };\n    tmp();\n    // axios.get('/api/users/로그인한사람id');\n  }, [navigate]);\n  const onLogout = () => {\n    //로그아웃 버튼이 클릭되면 토큰을 삭제\n    //로컬 스토리지에도 저장\n    localStorage.removeItem('accessToken');\n    setAccessToken(null);\n    navi;\n  };\n  return /*#__PURE__*/_jsxDEV(Header, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(UserText, {\n        onClick: e => {\n          setAnchorEl(e.currentTarget);\n        },\n        children: [loggedInUser.email, /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\uB2D8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 85\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Popover, {\n        anchorEl: anchorEl,\n        open: open,\n        onClose: () => {\n          setAnchorEl(null);\n        },\n        anchorOrigin: {\n          vertical: 'bottom',\n          horizontal: 'left'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\uD68C\\uC6D0\\uAC00\\uC785\\uC77C : \", loggedInUser.created_date]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\uB9C8\\uC9C0\\uB9C9\\uC218\\uC815\\uC77C: \", loggedInUser.updated_date]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"\\uB85C\\uADF8\\uC544\\uC6C3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MenuOpenIcon, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n_s(DashboardHeader, \"gVaZYurTbaYLhchpzbdLBqiVrGc=\", false, function () {\n  return [useNavigate];\n});\n_c = DashboardHeader;\nexport default DashboardHeader;\nvar _c;\n$RefreshReg$(_c, \"DashboardHeader\");","map":{"version":3,"names":["useContext","useEffect","useState","UserText","Header","axios","UserContext","useNavigate","MenuIcon","MenuOpenIcon","Popover","jsxDEV","_jsxDEV","DashboardHeader","_s","navigate","accessToken","loggedInUser","setLoggedInUser","email","created_date","updated_date","anchorEl","setAnchorEl","open","Boolean","tmp","res","get","headers","Authorization","localStorage","getItem","res2","data","console","log","err","alert","replace","onLogout","removeItem","setAccessToken","navi","children","onClick","e","currentTarget","fileName","_jsxFileName","lineNumber","columnNumber","onClose","anchorOrigin","vertical","horizontal","_c","$RefreshReg$"],"sources":["C:/Users/TED/Desktop/FrontClass/resource/react/test/src/components/common/header.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\r\nimport { UserText } from \"../../styles/common/aside.styles\";\r\nimport { Header } from \"../../styles/common/header.styles\";\r\nimport axios from \"axios\";\r\nimport { UserContext } from \"../../App\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport MenuIcon from '@mui/icons-material/Menu';\r\nimport MenuOpenIcon from '@mui/icons-material/MenuOpen';\r\nimport { Popover } from \"@mui/material\";\r\n\r\nconst DashboardHeader = ()=>{\r\n  const navigate = useNavigate();\r\n  // 전역state변수에 있는 토큰 값 가져오기\r\n  const {accessToken} = useContext(UserContext);\r\n  const [loggedInUser, setLoggedInUser] = useState( { \r\n    email:'로그인후 이용해주세요',\r\n    created_date:'',\r\n    updated_date:''\r\n  } );\r\n  // const [loggedInEmail , setLoggedInEmail] = useState('로그인후 이용해주세요');\r\n\r\n  // popOver 창의 기준 element 요소\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  let open = Boolean(anchorEl);\r\n\r\n  // 헤더가 그려지면 db가서 로그인 한 사람 정보 가져오기\r\n  useEffect(()=>{\r\n\r\n    let tmp = async ()=>{\r\n      try{\r\n        let res = await axios.get('/api/loggedInEmail', \r\n          {headers : {Authorization : `Bearer ${localStorage.getItem('accessToken')}`}}\r\n        );\r\n\r\n        // res.data에 로그인한 사람 이메일 주소가 들어있음\r\n        let res2 = await axios.get(`/api/users/${res.data}`);\r\n        console.log(res2.data);\r\n        setLoggedInUser(res2.data);\r\n\r\n\r\n      }catch(err){\r\n        // 로그인 시간이 만료되거나 로그인을 안한 경우\r\n        console.log(err);\r\n        alert('로그인을 먼저 해주셔야 이용하실 수 있습니다');\r\n        navigate('/login', {replace : true});\r\n      }\r\n    }\r\n\r\n    tmp();\r\n    // axios.get('/api/users/로그인한사람id');\r\n  }, [ navigate ]);\r\n\r\n  const onLogout = () => {\r\n\r\n    //로그아웃 버튼이 클릭되면 토큰을 삭제\r\n    //로컬 스토리지에도 저장\r\n    localStorage.removeItem('accessToken');\r\n\r\n    setAccessToken(null);\r\n    navi\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n  return(\r\n    <Header>\r\n      <div>\r\n        <UserText onClick={(e)=>{setAnchorEl(e.currentTarget)}}>{loggedInUser.email}<span>님</span></UserText>\r\n        <Popover \r\n          anchorEl={anchorEl} \r\n          open={open} \r\n          onClose={()=>{setAnchorEl(null)}}\r\n          anchorOrigin={ {vertical:'bottom', horizontal:'left'} }\r\n        >\r\n          <p>회원가입일 : {loggedInUser.created_date}</p>\r\n          <p>마지막수정일: {loggedInUser.updated_date}</p>\r\n          <button>로그아웃</button>\r\n        </Popover>\r\n      </div>\r\n      <MenuOpenIcon/>\r\n    </Header>\r\n  );\r\n}\r\n\r\nexport default DashboardHeader;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}