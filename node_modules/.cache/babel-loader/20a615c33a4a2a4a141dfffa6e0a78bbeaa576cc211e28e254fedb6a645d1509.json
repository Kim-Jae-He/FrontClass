{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\TED\\\\Desktop\\\\FrontClass\\\\resource\\\\react\\\\test\\\\src\\\\components\\\\common\\\\header.js\",\n  _s = $RefreshSig$();\nimport { useContext, useEffect, useState } from 'react';\nimport { UserText } from '../../styles/common/aside.styles';\nimport { Header } from '../../styles/common/header.styles';\nimport axios from 'axios';\nimport { UserContext } from '../../App';\nimport { useNavigate } from 'react-router-dom';\nimport MenuIcon from '@mui/icons-material/Menu';\nimport MenuOpenIcon from '@mui/icons-material/MenuOpen';\nimport { Popover } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DashboardHeader = props => {\n  _s();\n  // DashboardLayout에서 만든 state변수와 setState함수를 자식인\n  // DashboardHeader에서 받아옴\n  const {\n    isOpen,\n    setIsOpen\n  } = props;\n  const navigate = useNavigate();\n  // 전역state변수에 있는 토큰 값 가져오기\n  const {\n    accessToken,\n    setAccessToken\n  } = useContext(UserContext);\n  const [loggedInUser, setLoggedInUser] = useState({\n    email: '로그인후 이용해주세요',\n    created_date: '',\n    updated_date: ''\n  });\n  // const [loggedInEmail , setLoggedInEmail] = useState('로그인후 이용해주세요');\n\n  // popOver 창의 기준 element 요소\n  const [anchorEl, setAnchorEl] = useState(null);\n  let open = Boolean(anchorEl);\n\n  // 헤더가 그려지면 db가서 로그인 한 사람 정보 가져오기\n  useEffect(() => {\n    let tmp = async () => {\n      if (accessToken === null) return;\n      try {\n        let res = await axios.get('/api/loggedInEmail', {\n          headers: {\n            Authorization: `Bearer ${accessToken}`\n          }\n        });\n\n        // res.data에 로그인한 사람 이메일 주소가 들어있음\n        let res2 = await axios.get(`/api/users/${res.data}`);\n        console.log(res2.data);\n        setLoggedInUser(res2.data);\n      } catch (err) {\n        // 로그인 시간이 만료되거나 로그인을 안한 경우\n        console.log(err);\n        alert('로그인을 먼저 해주셔야 이용하실 수 있습니다');\n        navigate('/login', {\n          replace: true\n        });\n      }\n    };\n    tmp();\n    // axios.get('/api/users/로그인한사람id');\n  }, [navigate, accessToken]);\n  const onLogout = () => {\n    // 로그아웃 버튼이 클릭되면 토큰을 삭제\n    // localstorage 에도 삭제,\n    localStorage.removeItem('accessToken');\n    // 전역 상태변수 accessToken 에도 삭제\n    setAccessToken(null);\n    navigate('/', {\n      replace: true\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Header, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(UserText, {\n        onClick: e => {\n          setAnchorEl(e.currentTarget);\n        },\n        children: [loggedInUser.email, /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\uB2D8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Popover, {\n        anchorEl: anchorEl,\n        open: open,\n        onClose: () => {\n          setAnchorEl(null);\n        },\n        anchorOrigin: {\n          vertical: 'bottom',\n          horizontal: 'left'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\uD68C\\uC6D0\\uAC00\\uC785\\uC77C : \", loggedInUser.created_date]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\uB9C8\\uC9C0\\uB9C9\\uC218\\uC815\\uC77C: \", loggedInUser.updated_date]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onLogout,\n          children: \"\\uB85C\\uADF8\\uC544\\uC6C3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => {\n        setIsOpen(!isOpen);\n      },\n      style: {\n        cursor: 'pointer'\n      },\n      children: isOpen ? /*#__PURE__*/_jsxDEV(MenuOpenIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 19\n      }, this) : /*#__PURE__*/_jsxDEV(MenuIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 38\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n_s(DashboardHeader, \"uqy0n1bljui+omIZXcACU0oeiWU=\", false, function () {\n  return [useNavigate];\n});\n_c = DashboardHeader;\nexport default DashboardHeader;\nvar _c;\n$RefreshReg$(_c, \"DashboardHeader\");","map":{"version":3,"names":["useContext","useEffect","useState","UserText","Header","axios","UserContext","useNavigate","MenuIcon","MenuOpenIcon","Popover","jsxDEV","_jsxDEV","DashboardHeader","props","_s","isOpen","setIsOpen","navigate","accessToken","setAccessToken","loggedInUser","setLoggedInUser","email","created_date","updated_date","anchorEl","setAnchorEl","open","Boolean","tmp","res","get","headers","Authorization","res2","data","console","log","err","alert","replace","onLogout","localStorage","removeItem","children","onClick","e","currentTarget","fileName","_jsxFileName","lineNumber","columnNumber","onClose","anchorOrigin","vertical","horizontal","style","cursor","_c","$RefreshReg$"],"sources":["C:/Users/TED/Desktop/FrontClass/resource/react/test/src/components/common/header.js"],"sourcesContent":["import { useContext, useEffect, useState } from 'react';\r\nimport { UserText } from '../../styles/common/aside.styles';\r\nimport { Header } from '../../styles/common/header.styles';\r\nimport axios from 'axios';\r\nimport { UserContext } from '../../App';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport MenuIcon from '@mui/icons-material/Menu';\r\nimport MenuOpenIcon from '@mui/icons-material/MenuOpen';\r\nimport { Popover } from '@mui/material';\r\n\r\nconst DashboardHeader = (props) => {\r\n  // DashboardLayout에서 만든 state변수와 setState함수를 자식인\r\n  // DashboardHeader에서 받아옴\r\n  const { isOpen, setIsOpen } = props;\r\n\r\n  const navigate = useNavigate();\r\n  // 전역state변수에 있는 토큰 값 가져오기\r\n  const { accessToken, setAccessToken } = useContext(UserContext);\r\n  const [loggedInUser, setLoggedInUser] = useState({\r\n    email: '로그인후 이용해주세요',\r\n    created_date: '',\r\n    updated_date: '',\r\n  });\r\n  // const [loggedInEmail , setLoggedInEmail] = useState('로그인후 이용해주세요');\r\n\r\n  // popOver 창의 기준 element 요소\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  let open = Boolean(anchorEl);\r\n\r\n  // 헤더가 그려지면 db가서 로그인 한 사람 정보 가져오기\r\n  useEffect(() => {\r\n    let tmp = async () => {\r\n      if (accessToken === null) return;\r\n      try {\r\n        let res = await axios.get('/api/loggedInEmail', {\r\n          headers: { Authorization: `Bearer ${accessToken}` },\r\n        });\r\n\r\n        // res.data에 로그인한 사람 이메일 주소가 들어있음\r\n        let res2 = await axios.get(`/api/users/${res.data}`);\r\n        console.log(res2.data);\r\n        setLoggedInUser(res2.data);\r\n      } catch (err) {\r\n        // 로그인 시간이 만료되거나 로그인을 안한 경우\r\n        console.log(err);\r\n        alert('로그인을 먼저 해주셔야 이용하실 수 있습니다');\r\n        navigate('/login', { replace: true });\r\n      }\r\n    };\r\n\r\n    tmp();\r\n    // axios.get('/api/users/로그인한사람id');\r\n  }, [navigate, accessToken]);\r\n\r\n  const onLogout = () => {\r\n    // 로그아웃 버튼이 클릭되면 토큰을 삭제\r\n    // localstorage 에도 삭제,\r\n    localStorage.removeItem('accessToken');\r\n    // 전역 상태변수 accessToken 에도 삭제\r\n    setAccessToken(null);\r\n    navigate('/', { replace: true });\r\n  };\r\n\r\n  return (\r\n    <Header>\r\n      <div>\r\n        <UserText\r\n          onClick={(e) => {\r\n            setAnchorEl(e.currentTarget);\r\n          }}\r\n        >\r\n          {loggedInUser.email}\r\n          <span>님</span>\r\n        </UserText>\r\n        <Popover\r\n          anchorEl={anchorEl}\r\n          open={open}\r\n          onClose={() => {\r\n            setAnchorEl(null);\r\n          }}\r\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'left' }}\r\n        >\r\n          <p>회원가입일 : {loggedInUser.created_date}</p>\r\n          <p>마지막수정일: {loggedInUser.updated_date}</p>\r\n          <button onClick={onLogout}>로그아웃</button>\r\n        </Popover>\r\n      </div>\r\n      <div\r\n        onClick={() => {\r\n          setIsOpen(!isOpen);\r\n        }}\r\n        style={{ cursor: 'pointer' }}\r\n      >\r\n        {isOpen ? <MenuOpenIcon /> : <MenuIcon />}\r\n      </div>\r\n    </Header>\r\n  );\r\n};\r\n\r\nexport default DashboardHeader;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}